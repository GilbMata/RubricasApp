import{Q as N}from"./date.5ba94c70.js";import{Q as S,a as A}from"./QList.578d8c0d.js";import{u as M,d as v,b as T,Q as f,a as g}from"./dataService.5563a022.js";import{Q as _,C as b}from"./ClosePopup.47e99ea6.js";import{r as t,E as j,z as I,w as E,G as F,R as L,J as e,I as a,aB as R,aO as z,S as i,L as G,aC as w,Q as y,n as h,P as Q}from"./index.302b6eaf.js";import{Q as H}from"./QPage.9da0b17f.js";import"./format.2bc25e5f.js";import"./QSelect.c83c1a9a.js";import"./QChip.c0577f4d.js";import"./selection.d8d846f4.js";import"./QItem.89604af6.js";import"./authHeader.38407fc4.js";const J={class:"full-width row wrap justify-center"},O={class:"q-pa-sm col-grow"},$=i("div",null,"\xA1No se encontro ning\xFAn dato!",-1),K={class:"col-sm-auto col-xs-8 q-px-lg"},W={class:"row items-center justify-end"},X={class:"row items-center justify-end"},Z={class:"q-mt-lg col-"},pe={__name:"UsersRubricasAvg",setup(ee){const D=[{name:"name",label:"Nombre",field:s=>s.lastname+" "+s.firstname,align:"left",sortable:!0},{name:"email",label:"Correo",field:"email",align:"center"}],V=["name","email"],x=t([]),U=t(null);j();const m=M(),d=t(!1),c=t([]);t();const p=t(),C=[{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"promedio",label:"Promedio",field:"promedio",align:"center",sortable:!0},,],u=t(),r=t(""),n=t(""),P=new Date().toLocaleDateString(),Y={rowsPerPage:30};I(()=>{d.value=!0,B(!0),n.value=P,d.value=!1}),E([u,r,n],()=>{u.value&&r.value&&n.value&&v.getAvg(u.value[0].uuid,r.value,n.value).then(s=>{console.log("\u{1F680} ~ .then ~ data:",s),p.value=s.userubricas,x.value.length=0})});function k(s){return!0}function q(s){s.added}function B(s=!1){v.getUsers().then(o=>{c.value=o.users,s&&m.notify({icon:"done",color:"positive",message:"Datos cargados",timeout:1500})}).catch(o=>{console.log(o),m.notify({icon:"report_problem",color:"negative",message:"Error de conexi\xF3n",progress:!0})})}return(s,o)=>(F(),L(R,null,[e(N,{ref_key:"bar",ref:U,position:"bottom",color:"primary",size:"8px"},null,512),e(H,{padding:""},{default:a(()=>[e(z,{class:"q-pa-md"},{default:a(()=>[i("div",J,[i("div",O,[e(_,{dense:"",rows:c.value,columns:D,"visible-columns":V,"row-key":"email","items-per-page":10,"sort-by":"name",selection:"single",selected:u.value,"onUpdate:selected":o[0]||(o[0]=l=>u.value=l),onSelection:q,loading:d.value},{top:a(()=>[e(S,{class:"shdow-1"},{default:a(()=>[e(A,null,{default:a(()=>[G(" Usuarios ")]),_:1})]),_:1})]),"no-data":a(()=>[$]),loading:a(()=>[e(T,{showing:"",color:"primary"})]),_:1},8,["rows","selected","loading"])]),i("div",K,[e(w,{dense:"",modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=l=>r.value=l),class:"q-mx-lg",label:"Desde"},{append:a(()=>[e(y,{name:"event",class:"cursor-pointer"},{default:a(()=>[e(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(g,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=l=>r.value=l),options:k,"today-btn":"","no-unset":"","years-in-month-view":"",mask:"DD/MM/YYYY"},{default:a(()=>[i("div",W,[h(e(Q,{label:"Close",color:"primary",flat:""},null,512),[[b]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(w,{dense:"",modelValue:n.value,"onUpdate:modelValue":o[4]||(o[4]=l=>n.value=l),class:"q-mx-lg",label:"Hasta"},{append:a(()=>[e(y,{name:"event",class:"cursor-pointer"},{default:a(()=>[e(f,{"transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(g,{modelValue:n.value,"onUpdate:modelValue":o[3]||(o[3]=l=>n.value=l),"today-btn":"","no-unset":"",mask:"DD/MM/YYYY","years-in-month-view":""},{default:a(()=>[i("div",X,[h(e(Q,{label:"Close",color:"primary",flat:""},null,512),[[b]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),i("div",Z,[e(_,{dense:"",title:"Datos",rows:p.value,columns:C,"row-key":"name","hide-pagination":"",pagination:Y},null,8,["rows"])])]),_:1})]),_:1})],64))}};export{pe as default};
