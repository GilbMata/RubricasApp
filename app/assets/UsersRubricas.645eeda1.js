import{Q as F,d as _}from"./date.5ba94c70.js";import{Q as M,a as P}from"./QList.578d8c0d.js";import{r as t,E as q,z as B,w as b,G as N,R as S,J as s,I as o,aB as T,aO as H,S as i,L as I,aC as R,Q as E,n as L,P as j}from"./index.302b6eaf.js";import{u as z,d as m,Q as A,a as G,b as J}from"./dataService.5563a022.js";import{Q as p,C as O}from"./ClosePopup.47e99ea6.js";import{Q as $}from"./QPage.9da0b17f.js";import"./format.2bc25e5f.js";import"./QSelect.c83c1a9a.js";import"./QChip.c0577f4d.js";import"./selection.d8d846f4.js";import"./QItem.89604af6.js";import"./authHeader.38407fc4.js";const K={class:"row"},W={class:"q-pa-md col-grow"},X={class:""},Z={class:"row items-center justify-end"},ee=i("div",null,"\xA1No se encontro ning\xFAn dato!",-1),ae={class:"q-pa-md col-grow"},se={class:"q-pa-md col-grow"},ge={__name:"UsersRubricas",setup(oe){const w=[{name:"name",label:"Nombre",field:e=>e.lastname+" "+e.firstname,align:"left",sortable:!0},{name:"email",label:"Correo",field:"email",align:"center"}],h=["name","apellido","email"],D=[{name:"fecha",visible:!0,label:"",field:"date",align:"left",sortable:!0,format:e=>_.formatDate(e,"DD-MM-YYYY - HH:mm:ss")}],n=t([]),Q=t(null);q();const v=z(),d=t(!1),f=t([]),g=t(),c=t(),y=[{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"name",label:"Valor",field:"value",align:"left",sortable:!0},,],u=t(),l=t(""),Y=t(""),U=new Date().toLocaleDateString(),V={rowsPerPage:30};B(()=>{d.value=!0,k(!0),Y.value=U,d.value=!1}),b([u,l],()=>{u.value&&l.value&&m.getDates(u.value[0].uuid,l.value,l.value).then(e=>{console.log("\u{1F680} ~ .then ~ ele:",e),g.value=e.userubricas,c.value=[],n.value.length=0})}),b(n,()=>{if(console.log("\u{1F680} ~ watch ~ selFechas:",n.value),n.value){const e=_.formatDate(n.value[0].date,"YYYY-MM-DD HH:mm:ss");m.getData(u.value[0].uuid,e).then(a=>{c.value=a.userubricas})}});function x(e){return!0}function C(e){e.added&&console.log("\u{1F680} ~ selected ~ data:",e)}function k(e=!1){m.getUsers().then(a=>{f.value=a.users,e&&v.notify({icon:"done",color:"positive",message:"Datos cargados",timeout:1500})}).catch(a=>{console.log(a),v.notify({icon:"report_problem",color:"negative",message:"Error de conexi\xF3n",progress:!0})})}return(e,a)=>(N(),S(T,null,[s(F,{ref_key:"bar",ref:Q,position:"bottom",color:"primary",size:"8px"},null,512),s($,{padding:""},{default:o(()=>[s(H,{class:"q-pa-md"},{default:o(()=>[i("div",K,[i("div",W,[s(p,{class:"col-grow",dense:"",rows:f.value,columns:w,"visible-columns":h,"row-key":"email","items-per-page":10,"sort-by":"name",selection:"single",selected:u.value,"onUpdate:selected":a[2]||(a[2]=r=>u.value=r),onSelection:C,loading:d.value},{top:o(()=>[s(M,{class:"shdow-1"},{default:o(()=>[s(P,null,{default:o(()=>[I(" Usuarios ")]),_:1}),i("div",X,[s(R,{dense:"",modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=r=>l.value=r),class:"q-m-md",label:"Fecha"},{append:o(()=>[s(E,{name:"event",class:"cursor-pointer"},{default:o(()=>[s(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[s(G,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value=r),options:x,"today-btn":"","no-unset":"","years-in-month-view":"",mask:"DD/MM/YYYY"},{default:o(()=>[i("div",Z,[L(s(j,{label:"Close",color:"primary",flat:""},null,512),[[O]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),"no-data":o(()=>[ee]),loading:o(()=>[s(J,{showing:"",color:"primary"})]),_:1},8,["rows","selected","loading"])]),i("div",ae,[s(p,{dense:"",title:"Registros",rows:g.value,columns:D,selection:"single",selected:n.value,"onUpdate:selected":a[3]||(a[3]=r=>n.value=r),"row-key":"date"},null,8,["rows","selected"])])]),i("div",se,[s(p,{dense:"",title:"Datos",rows:c.value,columns:y,"row-key":"name","hide-pagination":"",pagination:V},null,8,["rows"])])]),_:1})]),_:1})],64))}};export{ge as default};
